# استفاده از نسخه پایدار نود
FROM node:20-slim

# تعیین پوشه کاری
WORKDIR /app

# کپی فایل‌های پکیج برای نصب وابستگی‌ها
COPY package*.json ./

# نصب وابستگی‌های پروژه
RUN npm install

# کپی تمام فایل‌های پروژه به کانتینر
COPY . .

# ساخت نسخه نهایی فرانت‌ند (تولید پوشه dist)
RUN npm run build

# باز کردن پورت 3000 (الزامی برای این محیط)
EXPOSE 3000

# اجرای سرور
# توجه: در این محیط از 'npm start' استفاده می‌شود که باید در package.json تعریف شده باشد
CMD ["npm", "start"]
